%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: main.dvi
%%Pages: 2
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Bold Times-Roman Times-Italic Helvetica Courier
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -O0,0.7in -omain.ps main.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2001.07.09:0225
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (main.dvi)
@start /Fa 137[29 32 16 29 19 32 32 32 32 48 13 29 13
13 32 32 16 32 32 29 32 32 9[55 39 2[39 2[39 45 6[42
1[36 3[39 19[16 46[{TeXBase1Encoding ReEncodeFont}31
58.1154 /Helvetica rf /Fb 134[29 2[29 29 16 23 19 2[29
29 45 16 2[16 29 29 1[26 29 26 29 26 13[32 2[32 42 1[52
36 8[39 9[29 29 29 29 29 29 29 29 29 29 2[19 45[{
TeXBase1Encoding ReEncodeFont}35 58.1154 /Times-Roman
rf /Fc 140[23 26 2[29 32 48 3[16 32 29 19 26 32 2[29
16[36 3[39 8[42 67[{TeXBase1Encoding ReEncodeFont}15
58.1154 /Times-Bold rf /Fd 137[37 37 21 29 25 2[37 37
58 3[21 37 37 1[33 37 33 1[33 9[71 4[50 1[42 54 10[54
2[54 65[{TeXBase1Encoding ReEncodeFont}21 74.7198 /Times-Roman
rf /Fe 138[37 2[25 8[21 1[37 1[33 30[42 19[37 37 2[19
46[{.167 SlantFont TeXBase1Encoding ReEncodeFont}9 74.7198
/Times-Roman rf /Ff 130[35 1[35 35 35 35 35 1[35 35 35
35 35 35 35 35 1[35 35 35 35 35 1[35 35 35 35 35 35 12[35
4[35 13[35 2[35 35 35 35 8[35 35 35 35 35 35 35 35 1[35
35 40[{TeXBase1Encoding ReEncodeFont}42 58.1154 /Courier
rf /Fg 136[60 1[46 23 42 28 46 46 46 46 69 18 2[18 46
46 23 46 46 42 1[46 9[78 2[51 55 2[55 65 12[55 55 14[46
46 3[28 3[28 28 40[{TeXBase1Encoding ReEncodeFont}31
83.022 /Helvetica rf /Fh 134[37 3[42 23 32 32 42 42 42
42 60 23 37 23 23 42 42 1[37 42 37 42 42 13[42 2[51 60
2[46 2[28 4[60 2[51 19[28 21 2[28 28 40[{TeXBase1Encoding ReEncodeFont}
32 83.022 /Times-Italic rf /Fi 134[50 50 2[55 33 39 44
1[55 50 55 83 3[28 55 1[33 44 55 44 14[66 55 72 8[39
3[66 17[50 50 50 2[25 46[{TeXBase1Encoding ReEncodeFont}25
99.6264 /Times-Bold rf /Fj 133[37 42 42 60 42 42 23 32
28 42 42 42 42 65 23 42 23 23 42 42 28 37 42 37 42 37
9[78 1[60 51 46 55 1[46 60 60 74 51 1[32 28 60 60 46
51 60 55 55 60 76 4[23 23 42 42 4[42 42 42 42 1[21 28
21 2[28 28 28 65 34[46 46 2[{TeXBase1Encoding ReEncodeFont}64
83.022 /Times-Roman rf /Fk 170[48 41 37 44 3[48 59 41
2[22 48 2[41 48 44 1[48 65[{TeXBase1Encoding ReEncodeFont}13
66.4176 /Times-Roman rf /Fl 134[42 4[28 32 37 1[46 42
46 2[46 1[23 46 2[37 46 2[42 14[60 4[78 9[60 55 66[{
TeXBase1Encoding ReEncodeFont}17 83.022 /Times-Bold rf
/Fm 134[60 2[60 1[40 47 53 1[66 60 66 100 3[33 1[60 40
53 1[53 1[60 12[80 66 86 1[73 11[86 2[86 65[{
TeXBase1Encoding ReEncodeFont}21 119.552 /Times-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop -138 363 4050 9 v 823 595 a Fm(A)30 b(T)-9 b(ype)30
b(System)f(f)m(or)h(Pr)n(e)n(v)o(enting)h(Data)e(Races)p
-138 760 V -138 997 a Fl(Chandrasekhar)20 b(Boyapati)2254
b Fk(C)t(H)t(A)t(N)t(D)t(R)t(A)t Fj(@)t Fk(L)t(C)t(S)t
Fj(.)t Fk(M)t(I)t(T)o Fj(.)t Fk(E)t(D)t(U)-138 1096 y
Fl(Martin)20 b(Rinard)2705 b Fk(R)t(I)t(N)r(A)t(R)t(D)t
Fj(@)t Fk(L)t(C)t(S)t Fj(.)t Fk(M)t(I)t(T)o Fj(.)t Fk(E)t(D)t(U)-138
1214 y Fj(MIT)20 b(Laboratory)e(for)h(Computer)g(Science,)h(200)f(T)-6
b(echnology)17 b(Square,)j(Cambridge)e(MA,)j(02139)d(USA)-138
1555 y Fi(1.)25 b(Intr)n(oduction)-138 1717 y Fj(The)k(use)g(of)g
(multiple)f(threads)h(of)f(control)g(is)i(quickly)e(becom-)-138
1816 y(ing)e(a)i(mainstream)d(programming)f(practice.)43
b(But)28 b(threads)e(can)-138 1916 y(signi\002cantly)17
b(complicate)g(the)h(softw)o(are)g(de)n(v)o(elopment)d(process.)-138
2015 y(Multi-threaded)22 b(programs)h(typically)h(synchronize)e
(operations)-138 2115 y(on)h(shared)f(data)h(to)h(ensure)e(that)i(the)f
(operations)e(e)o(x)o(ecute)h(atom-)-138 2215 y(ically)-5
b(.)73 b(F)o(ailure)35 b(to)i(correctly)d(synchronize)g(such)i
(operations)-138 2314 y(leads)20 b(to)g Fh(data)g(r)o(aces)p
Fj(,)g(which)f(occur)g(when)g(tw)o(o)i(threads)e(concur)n(-)-138
2414 y(rently)e(access)i(the)f(same)g(data)g(without)f
(synchronization,)f(and)h(at)-138 2514 y(least)k(one)f(of)f(the)i
(accesses)g(is)g(a)f(write.)-138 2663 y(Because)i(data)g(races)g(are)g
(one)f(of)h(the)g(most)g(insidious)f(program-)-138 2763
y(ming)26 b(errors)g(to)h(detect,)h(reproduce,)e(and)g(eliminate,)i
(man)o(y)e(re-)-138 2862 y(searchers)d(ha)n(v)o(e)h(de)n(v)o(eloped)d
(tools)j(that)g(help)g(programmers)d(de-)-138 2962 y(tect)k(or)g
(eliminate)f(data)g(races.)39 b(These)25 b(tools)f(range)g(from)g
(those)-138 3062 y(that)i(monitor)f(the)h(e)o(x)o(ecution)e(of)i(the)g
(program)e(to)j(dynamically)-138 3161 y(detect)i(potential)f(races,)i
(to)f(static)h(race)f(detection)e(systems,)k(to)-138
3261 y(more)19 b(formal)g(type)h(systems)h(that)f(ensure)g(race-free)e
(programs.)-138 3410 y(This)32 b(paper)e(presents)h(a)h(ne)n(w)f
(static)h(type)f(system)g(for)g(writing)-138 3510 y(multi-threaded)17
b(programs.)23 b(This)d(type)f(system)g(guarantees)f(that)-138
3609 y(an)o(y)31 b(well-typed)g(program)f(is)j(free)f(of)g(data)g
(races.)61 b(W)-7 b(e)33 b(focus)-138 3709 y(on)27 b(object-oriented)d
(programs)h(that)i(use)g(lock-based)f(synchro-)-138 3809
y(nization.)40 b(In)25 b(such)g(programs,)f(e)n(v)o(ery)g(shared)h
(data)g(structure)g(is)-138 3908 y(protected)h(by)g(a)i(lock)e(that)h
(must)h(be)e(acquired)g(before)g(the)h(data)-138 4008
y(structure)c(is)i(accessed.)37 b(Since)24 b(at)h(most)f(one)g(thread)f
(can)h(hold)f(a)-138 4108 y(lock)17 b(at)g(an)o(y)g(time,)g(the)g
(correct)g(use)g(of)g(lock-based)e(synchroniza-)-138
4207 y(tion)20 b(guarantees)f(that)h(the)g(program)e(is)j(race-free.)
-138 4357 y(Lik)o(e)d(pre)n(vious)f(such)h(type)g(systems)h(\(Flanagan)
e(&)i(Freund,)e(June)-138 4456 y(2000;)29 b(Bacon)e(et)h(al.,)h
(October)d(2000\),)h(we)h(pro)o(vide)d(a)j(w)o(ay)f(for)-138
4556 y(programmers)16 b(to)i(augment)f(their)h(programs)f(with)i(type)f
(declara-)-138 4656 y(tions)e(that)h(mak)o(e)e(the)i(locking)d
(discipline)i(e)o(xplicit.)23 b(These)16 b(decla-)-138
4755 y(rations)k(associate)h(locks)g(with)f(the)h(data)f(the)o(y)g
(protect.)26 b(The)20 b(type)-138 4855 y(check)o(er)d(uses)h(these)h
(declarations)e(to)h(v)o(erify)e(that)j(a)f(thread)f(holds)-138
4954 y(the)j(appropriate)e(locks)i(when)g(it)h(accesses)f(shared)g
(data.)-138 5104 y(But)37 b(unlik)o(e)f(pre)n(vious)e(systems,)41
b(we)c(let)g(programmers)c(write)-138 5203 y(generic)20
b(code)h(to)g(implement)g(a)g(class,)i(and)e(create)g(dif)n(ferent)e
(ob-)-138 5303 y(jects)27 b(of)g(the)f(class)i(that)f(follo)n(w)f(dif)n
(ferent)f(locking)g(disciplines.)-138 5403 y(W)-7 b(e)23
b(do)e(this)h(by)g(introducing)d(a)j(w)o(ay)g(of)f(parameterizing)e
(classes)-138 5502 y(that)32 b(lets)g(programmers)d(defer)i(decisions)g
(about)g(which)g(locks)-138 5602 y(protect)18 b(which)g(objects)h(from)
e(the)i(time)g(when)f(a)h(class)h(is)g(de\002ned)-138
5702 y(to)g(the)h(time)f(when)g(objects)f(of)h(that)h(class)g(are)f
(created.)1962 1555 y(W)m(ithout)j(this)i(\003e)o(xibility)-5
b(,)24 b(in)g(pre)n(vious)e(systems,)j(programmers)1962
1655 y(sometimes)31 b(had)g(to)h(acquire)f(redundant)e(locks)i(just)i
(to)e(ensure)1962 1754 y(that)d(their)g(programs)e(were)i(well-typed.)
48 b(Or)m(,)29 b(the)o(y)f(had)f(to)h(un-)1962 1854 y(necessarily)f
(duplicate)f(code)h(by)g(implementing)e(multiple)i(v)o(er)n(-)1962
1954 y(sions)c(of)f(the)h(same)f(classes;)j(these)e(v)o(ersions)f
(contained)f(the)h(e)o(x-)1962 2053 y(act)f(same)f(code)f(e)o(xcept)h
(for)f(synchronization)e(operations.)1962 2203 y(Our)29
b(system)h(also)g(pro)o(vides)e(def)o(ault)h(types)g(which)g(reduce)g
(the)1962 2302 y(b)n(urden)k(of)h(writing)g(the)g(e)o(xtra)g(type)g
(annotations.)66 b(In)34 b(partic-)1962 2402 y(ular)m(,)f
(single-threaded)c(programs)g(incur)i(almost)g(no)g(program-)1962
2502 y(ming)19 b(o)o(v)o(erhead)f(in)i(our)g(system.)1962
2651 y(W)-7 b(e)28 b(implemented)d(se)n(v)o(eral)i(multi-threaded)d(Ja)
n(v)n(a)j(programs)e(in)1962 2751 y(our)f(system.)40
b(Our)24 b(e)o(xperience)f(sho)n(ws)i(that)h(our)e(system)h(is)h(suf-)
1962 2850 y(\002ciently)h(e)o(xpressi)n(v)o(e)f(and)i(requires)e
(little)j(programming)24 b(o)o(v)o(er)n(-)1962 2950 y(head.)1962
3188 y Fi(2.)h(The)h(T)-7 b(ype)25 b(System)1962 3349
y Fj(The)h(k)o(e)o(y)g(to)h(our)f(type)g(system)h(is)g(the)g(concept)e
(of)h(object)g(o)n(wn-)1962 3449 y(ership.)45 b(This)27
b(resembles)f(the)h(notion)f(of)h(o)n(wnership)e(types)i(de-)1962
3549 y(scribed)21 b(in)i(\(Clark)o(e)e(et)i(al.,)f(October)f(1998\),)g
(e)n(v)o(en)g(though)f(there)1962 3648 y(it)34 b(w)o(as)h(moti)n(v)n
(ated)d(by)i(softw)o(are)f(engineering)e(principles)i(and)1962
3748 y(w)o(as)21 b(used)f(to)g(restrict)h(object)e(aliasing.)1962
3897 y(Ev)o(ery)27 b(object)h(in)h(our)f(system)h(has)g(an)f(o)n(wner)
-5 b(.)50 b(An)29 b(object)f(can)1962 3997 y(be)39 b(o)n(wned)f(by)h
(another)f(object,)43 b(by)c(itself,)44 b(or)39 b(by)g(a)g(special)1962
4097 y(per)n(-thread)32 b(o)n(wner)h(called)g Fg(thisThread)p
Fj(.)66 b(Objects)34 b(o)n(wned)f(by)1962 4196 y Fg(thisThread)p
Fj(,)27 b(either)e(directly)g(or)g(transiti)n(v)o(ely)-5
b(,)25 b(are)h(local)f(to)h(the)1962 4296 y(corresponding)19
b(thread)j(and)g(cannot)f(be)i(accessed)f(by)h(an)o(y)e(other)1962
4395 y(thread.)1962 4545 y(In)i(our)f(system,)i(it)g(is)g(necessary)f
(and)f(suf)n(\002cient)h(for)g(a)g(thread)f(to)1962 4645
y(acquire)27 b(the)i(lock)f(on)g(the)h(root)f(of)g(an)g(o)n(wnership)f
(tree)i(to)f(gain)1962 4744 y(e)o(xclusi)n(v)o(e)22 b(access)h(to)g
(all)h(the)f(members)e(in)j(the)f(tree.)33 b(Moreo)o(v)o(er)m(,)1962
4844 y(e)n(v)o(ery)17 b(thread)h(implicitly)h(holds)f(the)h(lock)f(on)g
(the)h(corresponding)1962 4943 y Fg(thisThread)p Fj(.)45
b(Thus,)28 b(a)f(thread)f(can)g(access)i(an)o(y)e(object)g(o)n(wned)
1962 5043 y(by)20 b Fg(thisThread)h Fj(without)e(e)o(xplicitly)g
(acquiring)g(an)o(y)g(locks.)1962 5192 y(The)28 b(language)f(we)h(use)h
(is)g(an)g(e)o(xtension)d(to)j(Concurrent)d(Ja)n(v)n(a,)1962
5292 y(which)h(is)i(a)f(v)n(ariant)f(of)h(Ja)n(v)n(a)g(and)g(has)g
(format)e(semantics.)48 b(W)-7 b(e)1962 5392 y(refer)24
b(to)g(our)g(language)e(as)k(P)o(arameterized)c(Race-Free)i(Ja)n(v)n
(a,)i(or)1962 5491 y(PRFJ.)d(A)e(class)h(de\002nition)f(in)g(PRFJ)i(is)
f(parameterized)d(by)i(a)g(list)1962 5591 y(of)d(o)n(wners.)24
b(Our)18 b(w)o(ay)h(of)g(parameterizing)d(is)j(similar)g(to)g(the)g
(pro-)1962 5691 y(posals)j(for)f(parametric)g(types)g(for)h(Ja)n(v)n
(a.)30 b(The)22 b(dif)n(ference)e(is)i(that)p eop
%%Page: 2 2
2 1 bop -138 351 a Ff(//)35 b(thisOwner)e(owns)i(the)f(Account)g
(object)-138 418 y(class)g(Account<thisOwner>)f({)-68
484 y(int)h(balance)g(=)h(0;)-68 551 y(int)f(deposit\(int)g(x\))g
(requires)g(\(this\))g({)1 617 y(this.balance)g(=)h(this.balance)e(+)i
(x;)-68 683 y(})-138 750 y(})-138 816 y(//)g(a1)f(is)h(owned)f(by)h
(this)f(thread,)g(so)h(it)f(is)h(thread-local)-138 883
y(Account<thisThread>)d(a1)j(=)g(new)f(Account<thisThread>;)-138
949 y(a1.deposit\(10\);)-138 1082 y(//)h(a2)f(owns)h(itself,)f(so)g(it)
h(can)f(be)h(shared)-138 1148 y(Account<self>)e(a2)i(=)g(new)f
(Account<self>;)-138 1215 y(fork)g(\(a2\))h({)f(synchronized)g(\(a2\))g
(in)h({)f(a2.deposit\(10\);)f(})i(})-138 1281 y(fork)f(\(a2\))h({)f
(synchronized)g(\(a2\))g(in)h({)f(a2.deposit\(10\);)f(})i(})62
1441 y Fe(Figure)19 b(1.)26 b Fd(An)18 b(Account)i(Program)f(W)m(ith)f
(no)i(Data)f(Races)-138 1627 y Fj(the)h(parameters)f(are)h(v)n(alues)g
(and)g(not)g(other)f(types.)-138 1777 y(Figure)g(1)g(sho)n(ws)h(an)f(e)
o(xample)g(where)f(the)i Fg(Account)g Fj(class)h(is)f(pa-)-138
1876 y(rameterized)j(by)i Fg(thisOwner)p Fj(.)39 b Fg(thisOwner)25
b Fj(o)n(wns)g(the)g Fg(this)g Fj(ob-)-138 1976 y(ject.)g(In)18
b(general,)f(the)h(\002rst)h(formal)e(parameter)g(of)h(a)h(class)g(al)o
(w)o(ays)-138 2075 y(o)n(wns)h(the)g Fg(this)h Fj(object.)-138
2225 y(In)f(the)f(case)i(of)e(v)n(ariable)g Fg(a1)p Fj(,)h(the)g
(special)g Fg(thisThread)h Fj(o)n(wner)e(is)-138 2325
y(used)26 b(to)f(instantiate)h(the)g Fg(Account)g Fj(class.)43
b(Thus,)26 b Fg(a1)h Fj(is)g(o)n(wned)-138 2424 y(by)18
b Fg(thisThread)h Fj(and)f(hence)f(is)i(local)g(to)f(the)g(main)g
(thread.)24 b(In)18 b(the)-138 2524 y(case)k(of)f Fg(a2)p
Fj(,)i(the)e(special)h Fg(self)g Fj(o)n(wner)f(is)h(used)f(to)h
(instantiate)g(the)-138 2623 y Fg(Account)d Fj(class.)26
b(This)18 b(means)h(that)f Fg(a2)i Fj(o)n(wns)e(itself,)i(so)f(it)g
(can)g(be)-138 2723 y(potentially)g(shared)g(between)h(threads.)-138
2873 y(Methods)e(can)h(no)n(w)f(require)g(callers)h(to)g(hold)f(locks)h
(on)g(some)f(ob-)-138 2972 y(jects)30 b(using)f(the)g
Fg(requires)h Fj(clause.)53 b(In)29 b(the)h(e)o(xample,)g(the)f
Fg(de-)-138 3072 y(posit)e Fj(method)e(on)h Fg(Account)h
Fj(requires)e(that)h(e)n(v)o(ery)f(thread)g(hold)-138
3171 y(the)f(lock)f(on)g(the)g(\(root)g(o)n(wner)f(of)i(the\))f
Fg(Account)h Fj(object)f(before)-138 3271 y(the)17 b(thread)f(calls)h
(the)g Fg(deposit)h Fj(method.)k(This)17 b(ensures)f(that)h(there)-138
3371 y(will)28 b(be)f(no)g(data)g(races)h(when)e(the)h
Fg(deposit)i Fj(method)d(is)i(called.)-138 3470 y(W)m(ithout)j(the)g
Fg(requires)h Fj(clause,)i(the)e Fg(deposit)g Fj(method)e(w)o(ould)-138
3570 y(not)20 b(ha)n(v)o(e)f(been)h(well-typed.)-138
3719 y(In)e(the)h(e)o(xample,)e(all)i(the)g(threads)f(that)h(call)g
(the)f Fg(deposit)i Fj(method)-138 3819 y(on)29 b Fg(a2)h
Fj(\002rst)g(acquire)f(the)g(lock)g(on)g Fg(a2)p Fj(.)53
b(F)o(or)29 b Fg(a1)h Fj(ho)n(we)n(v)o(er)m(,)g(the)-138
3919 y(main)h(thread)f(implicitly)g(holds)h(the)g(lock)f(on)h(the)g
Fg(thisThread)-138 4018 y Fj(o)n(wner)23 b(that)i(o)n(wns)f
Fg(a1)p Fj(.)39 b(Hence,)25 b(it)g(does)f(not)g(e)o(xplicitly)g
(acquire)-138 4118 y(an)o(y)19 b(locks)h(before)f(calling)h(the)g
Fg(deposit)i Fj(method)c(on)i Fg(a1)p Fj(.)-138 4267
y(It)27 b(is)g(important)e(to)i(note)f(that)h(PRFJ)h(is)g(a)f
(statically)g(typed)e(sys-)-138 4367 y(tem.)50 b(The)28
b(o)n(wnership)e(relations)i(are)g(used)h(only)e(for)h(compile-)-138
4467 y(time)22 b(type)f(checking)e(and)i(are)h(not)f(preserv)o(ed)e(at)
j(runtime.)28 b(Con-)-138 4566 y(sequently)-5 b(,)18
b(PRFJ)k(programs)d(ha)n(v)o(e)g(no)h(runtime)g(o)o(v)o(erhead)d(when)
-138 4666 y(compared)h(to)i(re)o(gular)f(\(Concurrent\))f(Ja)n(v)n(a)i
(programs.)-138 4815 y(More)e(details)i(on)e(the)i(type)e(system,)h
(including)f(the)h(formal)f(rules)-138 4915 y(for)j(type)g(checking)f
(and)h(ho)n(w)g(the)g(system)h(automatically)e(infers)-138
5014 y(most)c(of)f(the)h(e)o(xtra)f(type)g(declarations,)g(will)h
(appear)f(in)g(\(Bo)o(yapati)-138 5114 y(&)20 b(Rinard,)g(October)f
(2001\).)-138 5352 y Fi(3.)25 b(Experience)-138 5514
y Fj(W)-7 b(e)35 b(implemented)d(a)j(number)d(of)h(Ja)n(v)n(a)i
(programs)d(in)i(our)f(e)o(x-)-138 5613 y(tended)20 b(language)f
(including)g(se)n(v)o(eral)i(classes)h(from)e(the)h(Ja)n(v)n(a)g(li-)
-138 5713 y(braries.)i(W)-7 b(e)17 b(also)f(modi\002ed)f(some)g(serv)o
(er)g(programs)f(and)h(imple-)p 2232 316 1411 4 v 2230
383 4 67 v 3026 383 V 3106 363 a Fc(Lines)p 3318 383
V 171 w(Lines)p 3641 383 V 2230 449 V 2519 429 a(Pr)o(ogram)p
3026 449 V 337 w(of)g(Code)p 3318 449 V 100 w(Changed)p
3641 449 V 2232 452 1411 4 v 2232 469 V 2230 535 4 67
v 2721 515 a Fb(Collection)g(Classes)p 3641 535 V 2232
539 1411 4 v 2230 605 4 67 v 2282 585 a Fa(ja)o(v)o(a.util.V)-5
b(ector)p 3026 605 V 462 w Fb(0992)p 3318 605 V 220 w(35)p
3641 605 V 2230 671 V 2282 652 a Fa(ja)o(v)o(a.util.Hashtab)o(le)p
3026 671 V 365 w Fb(1011)p 3318 671 V 220 w(53)p 3641
671 V 2232 675 1411 4 v 2232 691 V 2230 758 4 67 v 2682
738 a(Other)15 b(Library)g(Classes)p 3641 758 V 2232
761 1411 4 v 2230 828 4 67 v 2282 808 a Fa(ja)o(v)o(a.io)n(.Pr)q
(intStream)p 3026 828 V 363 w Fb(568)p 3318 828 V 235
w(14)p 3641 828 V 2230 894 V 2282 874 a Fa(ja)o(v)o(a.io)n
(.FilterOutputStream)p 3026 894 V 181 w Fb(148)p 3318
894 V 235 w(05)p 3641 894 V 2230 960 V 2282 940 a Fa(ja)o(v)o(a.io)n
(.OutputStream)p 3026 960 V 310 w Fb(134)p 3318 960 V
235 w(03)p 3641 960 V 2230 1027 V 2282 1007 a Fa(ja)o(v)o(a.io)n(.Buff)
n(eredWr)q(iter)p 3026 1027 V 298 w Fb(253)p 3318 1027
V 235 w(09)p 3641 1027 V 2230 1093 V 2282 1073 a Fa(ja)o(v)o(a.io)n
(.OutputStreamWr)q(iter)p 3026 1093 V 155 w Fb(266)p
3318 1093 V 235 w(11)p 3641 1093 V 2230 1160 V 2282 1140
a Fa(ja)o(v)o(a.io)n(.Wr)q(iter)p 3026 1160 V 514 w Fb(177)p
3318 1160 V 235 w(06)p 3641 1160 V 2232 1163 1411 4 v
2232 1180 V 2230 1246 4 67 v 2561 1226 a(Multi-threaded)h(Serv)o(er)f
(Programs)p 3641 1246 V 2232 1249 1411 4 v 2230 1316
4 67 v 2282 1296 a Fa(http)p 3026 1316 V 752 w Fb(563)p
3318 1316 V 235 w(26)p 3641 1316 V 2230 1382 V 2282 1362
a Fa(chat)p 3026 1382 V 739 w Fb(308)p 3318 1382 V 235
w(21)p 3641 1382 V 2230 1449 V 2282 1429 a Fa(stoc)o(k)h(quote)p
3026 1449 V 554 w Fb(242)p 3318 1449 V 235 w(12)p 3641
1449 V 2230 1515 V 2282 1495 a Fa(game)p 3026 1515 V
704 w Fb(087)p 3318 1515 V 235 w(10)p 3641 1515 V 2230
1581 V 2282 1561 a Fa(phone)p 3026 1581 V 688 w Fb(302)p
3318 1581 V 235 w(10)p 3641 1581 V 2232 1585 1411 4 v
2420 1727 a Fe(Figure)j(2.)26 b Fd(Programming)20 b(Ov)o(erhead)1962
1991 y Fj(mented)f(them)g(in)g(our)g(system.)25 b(These)20
b(include)e(an)i Fh(http)f Fj(serv)o(er)m(,)f(a)1962
2090 y Fh(c)o(hat)h Fj(serv)o(er)m(,)f(a)i Fh(stoc)n(k)g(quote)e
Fj(serv)o(er)m(,)g(a)i Fh(game)f Fj(serv)o(er)m(,)f(and)h
Fh(phone)p Fj(,)1962 2190 y(a)26 b(database-back)o(ed)c(information)h
(se)n(v)o(er)-5 b(.)39 b(These)25 b(programs)e(e)o(x-)1962
2289 y(hibit)d(a)h(v)n(ariety)e(of)h(sharing)f(patterns.)25
b(Figure)19 b(2)i(sho)n(ws)f(the)g(lines)1962 2389 y(of)27
b(code)f(that)i(needed)e(e)o(xplicit)g(type)h(annotations)e(for)i(some)
g(of)1962 2489 y(the)20 b(programs)f(we)h(implemented)e(in)j(our)e
(system.)1962 2638 y(W)-7 b(e)21 b(implemented)c(the)j(library)e
(classes)j(in)f(our)e(system)i(to)g(be)f(e)o(x-)1962
2738 y(ternally)26 b(synchronized.)43 b(This)27 b(gi)n(v)o(es)g(the)g
(users)h(of)e(the)h(classes)1962 2837 y(the)34 b(\003e)o(xibility)f(to)
h(create)f(dif)n(ferent)f(instances)i(of)g(the)f(classes)1962
2937 y(with)24 b(dif)n(ferent)e(locking)g(disciplines.)34
b(In)24 b(f)o(act,)g(this)g(also)g(helped)1962 3037 y(us)e(eliminate)f
(some)g(unnecessary)f(synchronization)e(operations)1962
3136 y(from)32 b(Sun')-5 b(s)33 b(implementation)e(of)i(those)g
(classes.)65 b(F)o(or)33 b(e)o(xam-)1962 3236 y(ple,)20
b(in)h(the)f Fg(Pr)q(intStream)j Fj(class)e(in)g(Sun')-5
b(s)21 b(implementation,)d(the)1962 3335 y Fg(pr)q(int\(Str)q(ing\))g
Fj(method)d(acquires)h(the)h(lock)f(on)g(the)g Fg(Pr)q(intStream)1962
3435 y Fj(object)24 b(and)h(then)f(calls)i(a)f(method)f(that)h
(acquires)f(the)h(lock)g(on)f(a)1962 3535 y Fg(Buff)n(eredWr)q(iter)k
Fj(object)f(contained)e(within)i(the)f Fg(Pr)q(intStream)1962
3634 y Fj(object.)d(Acquiring)16 b(the)h(second)g(lock)g(w)o(as)h
(unnecessary)e(and)g(our)1962 3734 y(implementation)i(a)n(v)n(oids)i
(this.)1962 3972 y Fi(Refer)n(ences)1962 4121 y Fj(Bacon,)g(D.)h(F)-7
b(.,)21 b(Strom,)f(R.)h(E.,)g(&)g(T)-7 b(arafdar)m(,)19
b(A.)h(\(October)g(2000\).)2045 4221 y(Gua)n(v)n(a:)47
b(A)32 b(dialect)f(of)g(Ja)n(v)n(a)h(without)e(data)h(races.)65
b Fh(Object-)2045 4321 y(Oriented)17 b(Pr)l(o)o(gr)o(amming)o(,)g
(Systems,)h(Langua)o(g)o(es,)f(and)f(Appli-)2045 4420
y(cations)k(\(OOPSLA\))p Fj(.)1962 4585 y(Bo)o(yapati,)32
b(C.,)h(&)e(Rinard,)h(M.)f(\(October)d(2001\).)60 b(A)31
b(parame-)2045 4685 y(terized)19 b(type)g(system)h(for)f(race-free)e
(Ja)n(v)n(a)j(programs.)26 b Fh(Object-)2045 4785 y(Oriented)17
b(Pr)l(o)o(gr)o(amming)o(,)g(Systems,)h(Langua)o(g)o(es,)f(and)f
(Appli-)2045 4884 y(cations)k(\(OOPSLA\))p Fj(.)1962
5050 y(Clark)o(e,)29 b(D.)f(G.,)i(Potter)m(,)f(J.)f(M.,)h(&)f(Noble,)h
(J.)f(\(October)f(1998\).)2045 5149 y(Ownership)j(types)h(for)g(\003e)o
(xible)f(alias)i(protection.)63 b Fh(Object-)2045 5249
y(Oriented)17 b(Pr)l(o)o(gr)o(amming)o(,)g(Systems,)h(Langua)o(g)o(es,)
f(and)f(Appli-)2045 5348 y(cations)k(\(OOPSLA\))p Fj(.)1962
5514 y(Flanagan,)31 b(C.,)i(&)e(Freund,)g(S.)g(N.)f(\(June)g(2000\).)59
b(T)-7 b(ype-based)2045 5613 y(race)20 b(detection)g(for)g(Ja)n(v)n(a.)
31 b Fh(Pr)l(o)o(gr)o(amming)19 b(Langua)o(g)o(e)g(Design)2045
5713 y(and)g(Implementation)f(\(PLDI\))p Fj(.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
